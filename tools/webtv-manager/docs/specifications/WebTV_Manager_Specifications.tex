\documentclass[10pt,a4paper]{article}

\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{lmodern}

\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{array}
\usepackage{url}

\author{Eric Beuque}
\title{Cahier des charges du projet de développement d'un site Web de gestion de WebTV}
\date{\today}

\begin{document}

\maketitle

\section*{Introduction}

Dans le cadre du projet FreetuxTV, on souhaite développer une application Web capable de gérer les WebTV. Ce document explique quels sont les objectifs que l'application doit atteindre, les contraintes techniques et les quelques briques fondamentales pour mener à bien ce projet.

\section*{Révisions}

\begin{itemize}
\item 5 novembre 2009 : Première version.
\end{itemize}

\section{Objectifs}

L'objectif principal est de fournir une interface Web pour que les utilitateurs de FreetuxTV puisse facilement transmettre à l'équipe des liens de WebTV ou WebRadio à ajouter dans les playlist. Ces liens seront soumis à une modération. L'interface permettra aussi à un utilisateur de signaler que des liens sont morts. A partir des liens enregistrés dans la base de donnée, on pourra facilement créer des playlists dynamiques suivant certains critères accessible simplement via une URL.

Voici le détail des fonctionnalités non exhaustive que l'application se devra de remplir. Bien entendu, toutes nouvelles idées pouvant améliorer les propositions citées ci-dessous sont les bienvenues et peuvent être transmises à l'équipe de FreetuxTV.

\subsection{Gestion des WebTV}

Une chaîne TV comporte de nombreux attributs : un nom, une langue, un pays d'origine, un logo, un type de chaînes (généraliste, sport, cinéma...), un site web, un lien direct vers le programme tv, une ou plusieurs page wikipedia suivant la langue...

Attention, il faut différencier les chaînes proprement dîtes et les flux des chaînes. En effet, gardons à l'esprit qu'une chaîne possède plusieurs moyens de diffusion et peut donc posséder plusieurs flux vidéos. Par exemple, France 3 reçu avec l'opérateur Free et Neuf sont la même chaîne mais pas le même flux. De ce fait, les informations d'un flux doit être distinct des informations de la chaîne. Un flux possède une URL, éventuellement un nom s'il est différent de celui par défaut de la chaîne. Il peut aussi posseder des options VLC qui seront utilisé pour la lecture de la chaînes. De plus un flux peut dépendre d'un FAI.

Par ailleurs, une chaîne peut aussi avoir des noms alternatifs. Pourquoi? Car il peut arriver que suivant la source pour recevoir un flux, le nom spécifié diffère de celui de la chaîne par défaut, de ce fait on utilise les noms alternatifs pour pouvoir faire des assocations, notament lorsque FreetuxTV analyse un fichier m3u pour retrouver les chaînes.

Bien sur un formulaire de recherche permettra de rechercher des chaînes en fonction de leur type, leur langue ou leur pays ou du FAI...

\subsection{Génération de playlist}

Le but de s'amuser à faire une base de donnée des WebTV est de pouvoir facilement générer des playlist m3u en fonction de divers paramètres. Par exemple, avoir toutes les chaînes de sport en français. On doit pouvoir générer la playlist uniquement avec des paramètres en URL (ex : \url{http://webtv/playlist/?type=sport&lang=fr}).

\subsection{Gestion des utilisateurs}

L'application devra donc avoir un système de gestion des utilisateurs afin que ceux ci puisse créer leur propre playlist personalisé avec les chaînes existantes. De plus, il pourrons signaler les WebTV dont le lien est mort et proposé des nouveaux flux. Pour des problèmes de droit, les flux proposé devront être modérer afin que l'application ne devienne pas illégal en proposant des contenus abusifs.

Pour le moment, seul les moderateurs doivent pouvoir modifier le contenu du site facilement lorsqu'il sont authentifier. Mais prévoir, qu'il soit possible qu'une personne non modérateur puisse aussi réaliser ces modifications à l'avenir.

\subsection{Web Service}

Cette fonction n'est pas une priorité dans l'immédiat, mais il faut prévoir qu'un jour elle pourrait être indispensable. Un Web Service pourrait permettre à FreetuxTV de plus facilement dialoguer avec la base de donnée. 

\subsubsection{Détection de lien mort}

On pourrait utiliser le WebService pour que FreetuxTV communique à la base de donnée lorsqu'un lien d'une WebTV est mort afin que les playlist soit automatiquement purger, ceci devrait être toutefois coupler à un système de modération.

\subsubsection{Mesure d'audience}

On pourrait aussi utiliser le WebService afin d'établir un système de mesure d'audience, afin de connaître les chaînes les plus regarder avec FreetuxTV.

\section{Base de donnée}

Voici un premier jet de l'architecture de la base de donnée.

\subsection{Table Lang}

Cette table contient les attributs concernant une langue.

\begin{itemize}
\item code : code ISO\_639-1 de la langue (\url{http://fr.wikipedia.org/wiki/Liste\_des\_codes\_ISO\_639-2})
\item label : nom anglais de la langue
\end{itemize}

\subsection{Table Country}

Cette table contient les attributs concernant un pays.

\begin{itemize}
\item code : code ISO\_3166-1 du pays (\url{http://fr.wikipedia.org/wiki/ISO\_3166-1})
\item label : nom anglais du pays
\end{itemize}

\subsection{Table TVChannelType}

Cette table contient les attributs concernant le type d'un chaîne.

\begin{itemize}
\item id : identifiant unique
\item label : nom anglais du type de chaîne
\end{itemize}

\subsection{Table TVChannel}

Cette table contient les attributs concernant une chaîne.

\begin{itemize}
\item id : identifiant unique
\item name : nom officiel de la chaîne
\item lang\_id : identifiant de la langue principal de la chaîne
\item country\_code : identifiant du pays de la chaîne
\item channeltype\_id : identifiant du type de la chaîne
\item logo : nom du logo stocker sur le serveur
\item website : url du site web officiel de la chaîne
\item guideurl : url direct du guide officiel de la chaîne
\end{itemize}

\subsection{Table TVChannelOtherName}

Cette table contient les attributs concernant le nom alternatif d'une chaîne qu'on peut trouver dans les playlists.

\begin{itemize}
\item id : identifiant unique
\item name : nom alternatif de la chaîne
\item tvchannel\_id : identifiant de la chaîne associé
\end{itemize}

\subsection{Table TVChannelStream}

Cette table contient les attributs concernant le flux d'une chaîne TV.

\begin{itemize}
\item id : identifiant unique
\item name : nom donné au flux
\item url : url du flux
\item tvchannel\_id : identifiant de la chaîne associé
\end{itemize}

\subsection{Table UserProfil}

Cette table contient les attributs concernant le profil d'un utilisateur (administateur, moderateur, utilisateur).

\begin{itemize}
\item id : identifiant unique
\item label : nom anglais du profil
\end{itemize}

\subsection{Table User}

Cette table contient les attributs concernant un utilisateur de l'application.

\begin{itemize}
\item id : identifiant unique
\item login : nom d'utilisateur
\item password : mot de passe crypté
\item profil\_id : identifiant du profil
\end{itemize}

\section{Contraintes techniques}

Le projet devra remplir quelques contraintes techniques afin de pouvoir facilement le faire évolués.

\begin{itemize}
\item Toutes les parties du code (nom des variable, fonctions, commentaires...) devront être codés en anglais afin qu'un éventuel développeur étranger puisse facilement intégrer le projet.
\item L'application devra être codé en PHP/MySQL.
\item L'utilisation d'un framework tel que CakePHP ou Pluf serait bénéfique pour le projet (internationalisation, MVC...).
\end{itemize}


\end{document}
